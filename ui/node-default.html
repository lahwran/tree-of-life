<span ng-click="children_hidden=!children_hidden">
  {{node.type}}<span ng-show="node.text">: {{node.text}}</span>
  <div class="children" ng-show="children_hidden">
    ...
  </div>
</span>
<!-- need "track by node.id" for any kind of fancy animation or etc, but for now $index will do the job -->
<div class="children" ng-show="!children_hidden">
  <node ng-repeat="subnode in node.children track by $index" node="subnode"></node>
</div>

